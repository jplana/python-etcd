language: python
python:
  - "2.7"
  - "3.5"

before_install:
  - ./build_etcd.sh v2.2.0
  - pip install --upgrade setuptools

# command to install dependencies
install: 
  - if [[ $TRAVIS_PYTHON_VERSION == 2* ]]; then python bootstrap.py; fi;
  - if [[ $TRAVIS_PYTHON_VERSION == 3* ]]; then python bootstrap.py -c buildout3.cfg; fi;
  - bin/buildout

# command to run tests
script:
  PATH=$PATH:./etcd/bin bin/test

# Add env var to detect it during build
env: TRAVIS=True
